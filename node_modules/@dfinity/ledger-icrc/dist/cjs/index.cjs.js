"use strict";var Re=Object.defineProperty;var Me=Object.getOwnPropertyDescriptor;var Ue=Object.getOwnPropertyNames;var ze=Object.prototype.hasOwnProperty;var Qe=(e,a)=>{for(var t in a)Re(e,t,{get:a[t],enumerable:!0})},$e=(e,a,t,r)=>{if(a&&typeof a=="object"||typeof a=="function")for(let n of Ue(a))!ze.call(e,n)&&n!==t&&Re(e,n,{get:()=>a[n],enumerable:!(r=Me(a,n))||r.enumerable});return e};var He=e=>$e(Re({},"__esModule",{value:!0}),e);var Ye={};Qe(Ye,{ConsentMessageError:()=>C,ConsentMessageUnavailableError:()=>U,GenericError:()=>E,IcrcIndexCanister:()=>W,IcrcIndexNgCanister:()=>H,IcrcLedgerCanister:()=>X,IcrcMetadataResponseEntries:()=>Ee,IcrcTransferError:()=>w,IndexError:()=>P,InsufficientPaymentError:()=>q,UnsupportedCanisterCallError:()=>M,decodeIcrcAccount:()=>je,decodePayment:()=>Je,encodeIcrcAccount:()=>Xe,mapIcrc21ConsentMessageError:()=>he,toApproveArgs:()=>be,toIcrc21ConsentMessageArgs:()=>Ae,toTransferArg:()=>ye,toTransferFromArgs:()=>Ve});module.exports=He(Ye);var _=require("@dfinity/utils"),ye=({from_subaccount:e,fee:a,created_at_time:t,memo:r,...n})=>({...n,fee:(0,_.toNullable)(a),memo:(0,_.toNullable)(r),from_subaccount:(0,_.toNullable)(e),created_at_time:(0,_.toNullable)(t)}),Ve=({spender_subaccount:e,fee:a,created_at_time:t,memo:r,...n})=>({...n,fee:(0,_.toNullable)(a),memo:(0,_.toNullable)(r),spender_subaccount:(0,_.toNullable)(e),created_at_time:(0,_.toNullable)(t)}),be=({fee:e,created_at_time:a,memo:t,from_subaccount:r,expected_allowance:n,expires_at:o,...l})=>({...l,fee:(0,_.toNullable)(e),memo:(0,_.toNullable)(t),from_subaccount:(0,_.toNullable)(r),created_at_time:(0,_.toNullable)(a),expected_allowance:(0,_.toNullable)(n),expires_at:(0,_.toNullable)(o)}),Ae=({userPreferences:{metadata:{utcOffsetMinutes:e,language:a},deriveSpec:t},...r})=>({...r,user_preferences:{metadata:{language:a,utc_offset_minutes:(0,_.toNullable)(e)},device_spec:(0,_.isNullish)(t)?(0,_.toNullable)():(0,_.toNullable)("GenericDisplay"in t?{GenericDisplay:null}:{LineDisplay:{characters_per_line:t.LineDisplay.charactersPerLine,lines_per_page:t.LineDisplay.linesPerPage}})}});var P=class extends Error{};var w=class extends Error{constructor({msg:a,errorType:t}){super(a),this.errorType=t}},E=class extends Error{constructor(t,r){super();this.message=t;this.error_code=r}},C=class extends Error{},q=class extends C{},M=class extends C{},U=class extends C{},he=e=>"GenericError"in e?new E(e.GenericError.description,e.GenericError.error_code):"InsufficientPayment"in e?new q(e.InsufficientPayment.description):"UnsupportedCanisterCall"in e?new M(e.UnsupportedCanisterCall.description):"ConsentMessageUnavailable"in e?new U(e.ConsentMessageUnavailable.description):new C(`Unknown error type ${JSON.stringify(e)}`);var we=require("@dfinity/utils");var ke=({IDL:e})=>{let a=e.Rec(),t=e.Record({ledger_id:e.Opt(e.Principal),retrieve_blocks_from_ledger_interval_seconds:e.Opt(e.Nat64)}),r=e.Record({ledger_id:e.Principal,retrieve_blocks_from_ledger_interval_seconds:e.Opt(e.Nat64)}),n=e.Variant({Upgrade:t,Init:r}),o=e.Nat,l=e.Vec(e.Nat8),c=e.Record({owner:e.Principal,subaccount:e.Opt(l)}),f=e.Record({max_results:e.Nat,start:e.Opt(o),account:c}),m=e.Nat,N=e.Record({from:c,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(e.Nat64),amount:e.Nat,spender:e.Opt(c)}),O=e.Record({to:c,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(e.Nat64),amount:e.Nat}),T=e.Record({fee:e.Opt(e.Nat),from:c,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(e.Nat64),amount:e.Nat,expected_allowance:e.Opt(e.Nat),expires_at:e.Opt(e.Nat64),spender:c}),i=e.Record({to:c,fee:e.Opt(e.Nat),from:c,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(e.Nat64),amount:e.Nat,spender:e.Opt(c)}),u=e.Record({burn:e.Opt(N),kind:e.Text,mint:e.Opt(O),approve:e.Opt(T),timestamp:e.Nat64,transfer:e.Opt(i)}),d=e.Record({id:o,transaction:u}),V=e.Record({balance:m,transactions:e.Vec(d),oldest_tx_id:e.Opt(o)}),R=e.Record({message:e.Text}),b=e.Variant({Ok:V,Err:R}),A=e.Record({start:e.Nat,length:e.Nat}),h=e.Vec(e.Tuple(e.Text,a));a.fill(e.Variant({Int:e.Int,Map:h,Nat:e.Nat,Nat64:e.Nat64,Blob:e.Vec(e.Nat8),Text:e.Text,Array:e.Vec(a)}));let v=a,x=e.Record({blocks:e.Vec(v),chain_length:e.Nat64}),y=e.Record({ranges:e.Vec(e.Tuple(c,e.Vec(e.Tuple(o,o))))}),s=e.Record({owner:e.Principal,start:e.Opt(l)}),F=e.Record({num_blocks_synced:o});return e.Service({get_account_transactions:e.Func([f],[b],[]),get_blocks:e.Func([A],[x],[]),get_fee_collectors_ranges:e.Func([],[y],[]),icrc1_balance_of:e.Func([c],[m],[]),ledger_id:e.Func([],[e.Principal],[]),list_subaccounts:e.Func([s],[e.Vec(l)],[]),status:e.Func([],[F],[])})};var Pe=({IDL:e})=>{let a=e.Rec(),t=e.Record({ledger_id:e.Opt(e.Principal),retrieve_blocks_from_ledger_interval_seconds:e.Opt(e.Nat64)}),r=e.Record({ledger_id:e.Principal,retrieve_blocks_from_ledger_interval_seconds:e.Opt(e.Nat64)}),n=e.Variant({Upgrade:t,Init:r}),o=e.Nat,l=e.Vec(e.Nat8),c=e.Record({owner:e.Principal,subaccount:e.Opt(l)}),f=e.Record({max_results:e.Nat,start:e.Opt(o),account:c}),m=e.Nat,N=e.Record({from:c,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(e.Nat64),amount:e.Nat,spender:e.Opt(c)}),O=e.Record({to:c,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(e.Nat64),amount:e.Nat}),T=e.Record({fee:e.Opt(e.Nat),from:c,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(e.Nat64),amount:e.Nat,expected_allowance:e.Opt(e.Nat),expires_at:e.Opt(e.Nat64),spender:c}),i=e.Record({to:c,fee:e.Opt(e.Nat),from:c,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(e.Nat64),amount:e.Nat,spender:e.Opt(c)}),u=e.Record({burn:e.Opt(N),kind:e.Text,mint:e.Opt(O),approve:e.Opt(T),timestamp:e.Nat64,transfer:e.Opt(i)}),d=e.Record({id:o,transaction:u}),V=e.Record({balance:m,transactions:e.Vec(d),oldest_tx_id:e.Opt(o)}),R=e.Record({message:e.Text}),b=e.Variant({Ok:V,Err:R}),A=e.Record({start:e.Nat,length:e.Nat}),h=e.Vec(e.Tuple(e.Text,a));a.fill(e.Variant({Int:e.Int,Map:h,Nat:e.Nat,Nat64:e.Nat64,Blob:e.Vec(e.Nat8),Text:e.Text,Array:e.Vec(a)}));let v=a,x=e.Record({blocks:e.Vec(v),chain_length:e.Nat64}),y=e.Record({ranges:e.Vec(e.Tuple(c,e.Vec(e.Tuple(o,o))))}),s=e.Record({owner:e.Principal,start:e.Opt(l)}),F=e.Record({num_blocks_synced:o});return e.Service({get_account_transactions:e.Func([f],[b],["query"]),get_blocks:e.Func([A],[x],["query"]),get_fee_collectors_ranges:e.Func([],[y],["query"]),icrc1_balance_of:e.Func([c],[m],["query"]),ledger_id:e.Func([],[e.Principal],["query"]),list_subaccounts:e.Func([s],[e.Vec(l)],["query"]),status:e.Func([],[F],["query"])})};var Q=require("@dfinity/utils"),z=class extends Q.Canister{constructor(){super(...arguments);this.balance=t=>this.caller({certified:t.certified}).icrc1_balance_of({owner:t.owner,subaccount:(0,Q.toNullable)(t.subaccount)})}};var ve=require("@dfinity/utils"),We=({owner:e,subaccount:a})=>({owner:e,subaccount:(0,ve.toNullable)(a)}),$=({account:e,max_results:a,start:t})=>({account:We(e),max_results:a,start:(0,ve.toNullable)(t)});var H=class e extends z{constructor(){super(...arguments);this.getTransactions=async({certified:t,...r})=>{let n=await this.caller({certified:t}).get_account_transactions($(r));if("Err"in n)throw new P(n.Err.message);return n.Ok};this.ledgerId=t=>{let{ledger_id:r}=this.caller(t);return r()}}static create(t){let{service:r,certifiedService:n,canisterId:o}=(0,we.createServices)({options:t,idlFactory:Pe,certifiedIdlFactory:ke});return new e(o,r,n)}};var Z=require("@dfinity/utils");var Ce=({IDL:e})=>{let a=e.Record({ledger_id:e.Principal}),t=e.Nat,r=e.Record({owner:e.Principal,subaccount:e.Opt(e.Vec(e.Nat8))}),n=e.Record({max_results:e.Nat,start:e.Opt(t),account:r}),o=e.Record({from:r,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(e.Nat64),amount:e.Nat,spender:e.Opt(r)}),l=e.Record({to:r,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(e.Nat64),amount:e.Nat}),c=e.Record({fee:e.Opt(e.Nat),from:r,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(e.Nat64),amount:e.Nat,expected_allowance:e.Opt(e.Nat),expires_at:e.Opt(e.Nat64),spender:r}),f=e.Record({to:r,fee:e.Opt(e.Nat),from:r,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(e.Nat64),amount:e.Nat,spender:e.Opt(r)}),m=e.Record({burn:e.Opt(o),kind:e.Text,mint:e.Opt(l),approve:e.Opt(c),timestamp:e.Nat64,transfer:e.Opt(f)}),N=e.Record({id:t,transaction:m}),O=e.Record({transactions:e.Vec(N),oldest_tx_id:e.Opt(t)}),T=e.Record({message:e.Text}),i=e.Variant({Ok:O,Err:T}),u=e.Vec(e.Nat8),d=e.Record({owner:e.Principal,start:e.Opt(u)});return e.Service({get_account_transactions:e.Func([n],[i],[]),ledger_id:e.Func([],[e.Principal],[]),list_subaccounts:e.Func([d],[e.Vec(u)],[])})};var Be=({IDL:e})=>{let a=e.Record({ledger_id:e.Principal}),t=e.Nat,r=e.Record({owner:e.Principal,subaccount:e.Opt(e.Vec(e.Nat8))}),n=e.Record({max_results:e.Nat,start:e.Opt(t),account:r}),o=e.Record({from:r,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(e.Nat64),amount:e.Nat,spender:e.Opt(r)}),l=e.Record({to:r,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(e.Nat64),amount:e.Nat}),c=e.Record({fee:e.Opt(e.Nat),from:r,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(e.Nat64),amount:e.Nat,expected_allowance:e.Opt(e.Nat),expires_at:e.Opt(e.Nat64),spender:r}),f=e.Record({to:r,fee:e.Opt(e.Nat),from:r,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(e.Nat64),amount:e.Nat,spender:e.Opt(r)}),m=e.Record({burn:e.Opt(o),kind:e.Text,mint:e.Opt(l),approve:e.Opt(c),timestamp:e.Nat64,transfer:e.Opt(f)}),N=e.Record({id:t,transaction:m}),O=e.Record({transactions:e.Vec(N),oldest_tx_id:e.Opt(t)}),T=e.Record({message:e.Text}),i=e.Variant({Ok:O,Err:T}),u=e.Vec(e.Nat8),d=e.Record({owner:e.Principal,start:e.Opt(u)});return e.Service({get_account_transactions:e.Func([n],[i],[]),ledger_id:e.Func([],[e.Principal],["query"]),list_subaccounts:e.Func([d],[e.Vec(u)],["query"])})};var W=class e extends Z.Canister{constructor(){super(...arguments);this.getTransactions=async t=>{let r=await this.caller({certified:!0}).get_account_transactions($(t));if("Err"in r)throw new P(r.Err.message);return r.Ok};this.ledgerId=t=>{let{ledger_id:r}=this.caller(t);return r()}}static create(t){let{service:r,certifiedService:n,canisterId:o}=(0,Z.createServices)({options:t,idlFactory:Be,certifiedIdlFactory:Ce});return new e(o,r,n)}};var B=require("@dfinity/utils");var Ge=({IDL:e})=>{let a=e.Rec(),t=e.Rec(),r=e.Rec(),n=e.Record({num_blocks_to_archive:e.Opt(e.Nat64),max_transactions_per_response:e.Opt(e.Nat64),trigger_threshold:e.Opt(e.Nat64),more_controller_ids:e.Opt(e.Vec(e.Principal)),max_message_size_bytes:e.Opt(e.Nat64),cycles_for_archive_creation:e.Opt(e.Nat64),node_max_memory_size_bytes:e.Opt(e.Nat64),controller_id:e.Opt(e.Principal)}),o=e.Variant({Int:e.Int,Nat:e.Nat,Blob:e.Vec(e.Nat8),Text:e.Text}),l=e.Vec(e.Nat8),c=e.Record({owner:e.Principal,subaccount:e.Opt(l)}),f=e.Variant({SetTo:c,Unset:e.Null}),m=e.Record({icrc2:e.Bool}),N=e.Record({change_archive_options:e.Opt(n),token_symbol:e.Opt(e.Text),transfer_fee:e.Opt(e.Nat),metadata:e.Opt(e.Vec(e.Tuple(e.Text,o))),accounts_overflow_trim_quantity:e.Opt(e.Nat64),change_fee_collector:e.Opt(f),max_memo_length:e.Opt(e.Nat16),token_name:e.Opt(e.Text),feature_flags:e.Opt(m)}),O=e.Record({decimals:e.Opt(e.Nat8),token_symbol:e.Text,transfer_fee:e.Nat,metadata:e.Vec(e.Tuple(e.Text,o)),minting_account:c,initial_balances:e.Vec(e.Tuple(c,e.Nat)),maximum_number_of_accounts:e.Opt(e.Nat64),accounts_overflow_trim_quantity:e.Opt(e.Nat64),fee_collector_account:e.Opt(c),archive_options:e.Record({num_blocks_to_archive:e.Nat64,max_transactions_per_response:e.Opt(e.Nat64),trigger_threshold:e.Nat64,more_controller_ids:e.Opt(e.Vec(e.Principal)),max_message_size_bytes:e.Opt(e.Nat64),cycles_for_archive_creation:e.Opt(e.Nat64),node_max_memory_size_bytes:e.Opt(e.Nat64),controller_id:e.Principal}),max_memo_length:e.Opt(e.Nat16),token_name:e.Text,feature_flags:e.Opt(m)}),T=e.Variant({Upgrade:e.Opt(N),Init:O}),i=e.Nat,u=e.Record({block_range_end:i,canister_id:e.Principal,block_range_start:i}),d=e.Record({start:i,length:e.Nat}),V=e.Vec(e.Tuple(e.Text,r));r.fill(e.Variant({Int:e.Int,Map:V,Nat:e.Nat,Nat64:e.Nat64,Blob:e.Vec(e.Nat8),Text:e.Text,Array:e.Vec(r)}));let R=r,b=e.Record({blocks:e.Vec(R)}),A=e.Func([d],[b],[]),h=e.Record({certificate:e.Opt(e.Vec(e.Nat8)),first_index:i,blocks:e.Vec(R),chain_length:e.Nat64,archived_blocks:e.Vec(e.Record({callback:A,start:i,length:e.Nat}))}),v=e.Record({certificate:e.Opt(e.Vec(e.Nat8)),hash_tree:e.Vec(e.Nat8)}),x=e.Nat,y=e.Record({start:x,length:e.Nat}),s=e.Nat64,F=e.Record({from:c,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(s),amount:e.Nat,spender:e.Opt(c)}),J=e.Record({to:c,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(s),amount:e.Nat}),Y=e.Record({fee:e.Opt(e.Nat),from:c,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(s),amount:e.Nat,expected_allowance:e.Opt(e.Nat),expires_at:e.Opt(s),spender:c}),K=e.Record({to:c,fee:e.Opt(e.Nat),from:c,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(s),amount:e.Nat,spender:e.Opt(c)}),G=e.Record({burn:e.Opt(F),kind:e.Text,mint:e.Opt(J),approve:e.Opt(Y),timestamp:s,transfer:e.Opt(K)}),I=e.Record({transactions:e.Vec(G)}),L=e.Func([y],[I],[]),D=e.Record({first_index:x,log_length:e.Nat,transactions:e.Vec(G),archived_transactions:e.Vec(e.Record({callback:L,start:x,length:e.Nat}))}),p=e.Nat,ee=e.Record({url:e.Text,name:e.Text}),te=e.Record({to:c,fee:e.Opt(p),memo:e.Opt(e.Vec(e.Nat8)),from_subaccount:e.Opt(l),created_at_time:e.Opt(s),amount:p}),re=e.Variant({GenericError:e.Record({message:e.Text,error_code:e.Nat}),TemporarilyUnavailable:e.Null,BadBurn:e.Record({min_burn_amount:p}),Duplicate:e.Record({duplicate_of:i}),BadFee:e.Record({expected_fee:p}),CreatedInFuture:e.Record({ledger_time:s}),TooOld:e.Null,InsufficientFunds:e.Record({balance:p})}),ce=e.Variant({Ok:i,Err:re}),S=e.Record({utc_offset_minutes:e.Opt(e.Int16),language:e.Text}),ae=e.Record({metadata:S,device_spec:e.Opt(e.Variant({GenericDisplay:e.Null,LineDisplay:e.Record({characters_per_line:e.Nat16,lines_per_page:e.Nat16})}))}),ne=e.Record({arg:e.Vec(e.Nat8),method:e.Text,user_preferences:ae}),oe=e.Variant({LineDisplayMessage:e.Record({pages:e.Vec(e.Record({lines:e.Vec(e.Text)}))}),GenericDisplayMessage:e.Text}),se=e.Record({metadata:S,consent_message:oe}),k=e.Record({description:e.Text}),ie=e.Variant({GenericError:e.Record({description:e.Text,error_code:e.Nat}),InsufficientPayment:k,UnsupportedCanisterCall:k,ConsentMessageUnavailable:k}),pe=e.Variant({Ok:se,Err:ie}),le=e.Record({account:c,spender:c}),_e=e.Record({allowance:e.Nat,expires_at:e.Opt(s)}),de=e.Record({fee:e.Opt(e.Nat),memo:e.Opt(e.Vec(e.Nat8)),from_subaccount:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(s),amount:e.Nat,expected_allowance:e.Opt(e.Nat),expires_at:e.Opt(s),spender:c}),me=e.Variant({GenericError:e.Record({message:e.Text,error_code:e.Nat}),TemporarilyUnavailable:e.Null,Duplicate:e.Record({duplicate_of:i}),BadFee:e.Record({expected_fee:e.Nat}),AllowanceChanged:e.Record({current_allowance:e.Nat}),CreatedInFuture:e.Record({ledger_time:s}),TooOld:e.Null,Expired:e.Record({ledger_time:s}),InsufficientFunds:e.Record({balance:e.Nat})}),ue=e.Variant({Ok:i,Err:me}),ge=e.Record({to:c,fee:e.Opt(p),spender_subaccount:e.Opt(l),from:c,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(s),amount:p}),fe=e.Variant({GenericError:e.Record({message:e.Text,error_code:e.Nat}),TemporarilyUnavailable:e.Null,InsufficientAllowance:e.Record({allowance:p}),BadBurn:e.Record({min_burn_amount:p}),Duplicate:e.Record({duplicate_of:i}),BadFee:e.Record({expected_fee:p}),CreatedInFuture:e.Record({ledger_time:s}),TooOld:e.Null,InsufficientFunds:e.Record({balance:p})}),Ne=e.Variant({Ok:i,Err:fe}),Oe=e.Record({from:e.Opt(e.Principal)}),xe=e.Vec(e.Record({end:e.Nat,canister_id:e.Principal,start:e.Nat}));t.fill(e.Variant({Int:e.Int,Map:e.Vec(e.Tuple(e.Text,t)),Nat:e.Nat,Blob:e.Vec(e.Nat8),Text:e.Text,Array:e.Vec(t)})),a.fill(e.Record({log_length:e.Nat,blocks:e.Vec(e.Record({id:e.Nat,block:t})),archived_blocks:e.Vec(e.Record({args:e.Vec(d),callback:e.Func([e.Vec(d)],[a],[])}))}));let Te=e.Record({certificate:e.Vec(e.Nat8),hash_tree:e.Vec(e.Nat8)});return e.Service({archives:e.Func([],[e.Vec(u)],[]),get_blocks:e.Func([d],[h],[]),get_data_certificate:e.Func([],[v],[]),get_transactions:e.Func([y],[D],[]),icrc10_supported_standards:e.Func([],[e.Vec(e.Record({url:e.Text,name:e.Text}))],[]),icrc1_balance_of:e.Func([c],[p],[]),icrc1_decimals:e.Func([],[e.Nat8],[]),icrc1_fee:e.Func([],[p],[]),icrc1_metadata:e.Func([],[e.Vec(e.Tuple(e.Text,o))],[]),icrc1_minting_account:e.Func([],[e.Opt(c)],[]),icrc1_name:e.Func([],[e.Text],[]),icrc1_supported_standards:e.Func([],[e.Vec(ee)],[]),icrc1_symbol:e.Func([],[e.Text],[]),icrc1_total_supply:e.Func([],[p],[]),icrc1_transfer:e.Func([te],[ce],[]),icrc21_canister_call_consent_message:e.Func([ne],[pe],[]),icrc2_allowance:e.Func([le],[_e],[]),icrc2_approve:e.Func([de],[ue],[]),icrc2_transfer_from:e.Func([ge],[Ne],[]),icrc3_get_archives:e.Func([Oe],[xe],[]),icrc3_get_blocks:e.Func([e.Vec(d)],[a],[]),icrc3_get_tip_certificate:e.Func([],[e.Opt(Te)],[]),icrc3_supported_block_types:e.Func([],[e.Vec(e.Record({url:e.Text,block_type:e.Text}))],[])})};var Se=({IDL:e})=>{let a=e.Rec(),t=e.Rec(),r=e.Rec(),n=e.Record({num_blocks_to_archive:e.Opt(e.Nat64),max_transactions_per_response:e.Opt(e.Nat64),trigger_threshold:e.Opt(e.Nat64),more_controller_ids:e.Opt(e.Vec(e.Principal)),max_message_size_bytes:e.Opt(e.Nat64),cycles_for_archive_creation:e.Opt(e.Nat64),node_max_memory_size_bytes:e.Opt(e.Nat64),controller_id:e.Opt(e.Principal)}),o=e.Variant({Int:e.Int,Nat:e.Nat,Blob:e.Vec(e.Nat8),Text:e.Text}),l=e.Vec(e.Nat8),c=e.Record({owner:e.Principal,subaccount:e.Opt(l)}),f=e.Variant({SetTo:c,Unset:e.Null}),m=e.Record({icrc2:e.Bool}),N=e.Record({change_archive_options:e.Opt(n),token_symbol:e.Opt(e.Text),transfer_fee:e.Opt(e.Nat),metadata:e.Opt(e.Vec(e.Tuple(e.Text,o))),accounts_overflow_trim_quantity:e.Opt(e.Nat64),change_fee_collector:e.Opt(f),max_memo_length:e.Opt(e.Nat16),token_name:e.Opt(e.Text),feature_flags:e.Opt(m)}),O=e.Record({decimals:e.Opt(e.Nat8),token_symbol:e.Text,transfer_fee:e.Nat,metadata:e.Vec(e.Tuple(e.Text,o)),minting_account:c,initial_balances:e.Vec(e.Tuple(c,e.Nat)),maximum_number_of_accounts:e.Opt(e.Nat64),accounts_overflow_trim_quantity:e.Opt(e.Nat64),fee_collector_account:e.Opt(c),archive_options:e.Record({num_blocks_to_archive:e.Nat64,max_transactions_per_response:e.Opt(e.Nat64),trigger_threshold:e.Nat64,more_controller_ids:e.Opt(e.Vec(e.Principal)),max_message_size_bytes:e.Opt(e.Nat64),cycles_for_archive_creation:e.Opt(e.Nat64),node_max_memory_size_bytes:e.Opt(e.Nat64),controller_id:e.Principal}),max_memo_length:e.Opt(e.Nat16),token_name:e.Text,feature_flags:e.Opt(m)}),T=e.Variant({Upgrade:e.Opt(N),Init:O}),i=e.Nat,u=e.Record({block_range_end:i,canister_id:e.Principal,block_range_start:i}),d=e.Record({start:i,length:e.Nat}),V=e.Vec(e.Tuple(e.Text,r));r.fill(e.Variant({Int:e.Int,Map:V,Nat:e.Nat,Nat64:e.Nat64,Blob:e.Vec(e.Nat8),Text:e.Text,Array:e.Vec(r)}));let R=r,b=e.Record({blocks:e.Vec(R)}),A=e.Func([d],[b],["query"]),h=e.Record({certificate:e.Opt(e.Vec(e.Nat8)),first_index:i,blocks:e.Vec(R),chain_length:e.Nat64,archived_blocks:e.Vec(e.Record({callback:A,start:i,length:e.Nat}))}),v=e.Record({certificate:e.Opt(e.Vec(e.Nat8)),hash_tree:e.Vec(e.Nat8)}),x=e.Nat,y=e.Record({start:x,length:e.Nat}),s=e.Nat64,F=e.Record({from:c,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(s),amount:e.Nat,spender:e.Opt(c)}),J=e.Record({to:c,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(s),amount:e.Nat}),Y=e.Record({fee:e.Opt(e.Nat),from:c,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(s),amount:e.Nat,expected_allowance:e.Opt(e.Nat),expires_at:e.Opt(s),spender:c}),K=e.Record({to:c,fee:e.Opt(e.Nat),from:c,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(s),amount:e.Nat,spender:e.Opt(c)}),G=e.Record({burn:e.Opt(F),kind:e.Text,mint:e.Opt(J),approve:e.Opt(Y),timestamp:s,transfer:e.Opt(K)}),I=e.Record({transactions:e.Vec(G)}),L=e.Func([y],[I],["query"]),D=e.Record({first_index:x,log_length:e.Nat,transactions:e.Vec(G),archived_transactions:e.Vec(e.Record({callback:L,start:x,length:e.Nat}))}),p=e.Nat,ee=e.Record({url:e.Text,name:e.Text}),te=e.Record({to:c,fee:e.Opt(p),memo:e.Opt(e.Vec(e.Nat8)),from_subaccount:e.Opt(l),created_at_time:e.Opt(s),amount:p}),re=e.Variant({GenericError:e.Record({message:e.Text,error_code:e.Nat}),TemporarilyUnavailable:e.Null,BadBurn:e.Record({min_burn_amount:p}),Duplicate:e.Record({duplicate_of:i}),BadFee:e.Record({expected_fee:p}),CreatedInFuture:e.Record({ledger_time:s}),TooOld:e.Null,InsufficientFunds:e.Record({balance:p})}),ce=e.Variant({Ok:i,Err:re}),S=e.Record({utc_offset_minutes:e.Opt(e.Int16),language:e.Text}),ae=e.Record({metadata:S,device_spec:e.Opt(e.Variant({GenericDisplay:e.Null,LineDisplay:e.Record({characters_per_line:e.Nat16,lines_per_page:e.Nat16})}))}),ne=e.Record({arg:e.Vec(e.Nat8),method:e.Text,user_preferences:ae}),oe=e.Variant({LineDisplayMessage:e.Record({pages:e.Vec(e.Record({lines:e.Vec(e.Text)}))}),GenericDisplayMessage:e.Text}),se=e.Record({metadata:S,consent_message:oe}),k=e.Record({description:e.Text}),ie=e.Variant({GenericError:e.Record({description:e.Text,error_code:e.Nat}),InsufficientPayment:k,UnsupportedCanisterCall:k,ConsentMessageUnavailable:k}),pe=e.Variant({Ok:se,Err:ie}),le=e.Record({account:c,spender:c}),_e=e.Record({allowance:e.Nat,expires_at:e.Opt(s)}),de=e.Record({fee:e.Opt(e.Nat),memo:e.Opt(e.Vec(e.Nat8)),from_subaccount:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(s),amount:e.Nat,expected_allowance:e.Opt(e.Nat),expires_at:e.Opt(s),spender:c}),me=e.Variant({GenericError:e.Record({message:e.Text,error_code:e.Nat}),TemporarilyUnavailable:e.Null,Duplicate:e.Record({duplicate_of:i}),BadFee:e.Record({expected_fee:e.Nat}),AllowanceChanged:e.Record({current_allowance:e.Nat}),CreatedInFuture:e.Record({ledger_time:s}),TooOld:e.Null,Expired:e.Record({ledger_time:s}),InsufficientFunds:e.Record({balance:e.Nat})}),ue=e.Variant({Ok:i,Err:me}),ge=e.Record({to:c,fee:e.Opt(p),spender_subaccount:e.Opt(l),from:c,memo:e.Opt(e.Vec(e.Nat8)),created_at_time:e.Opt(s),amount:p}),fe=e.Variant({GenericError:e.Record({message:e.Text,error_code:e.Nat}),TemporarilyUnavailable:e.Null,InsufficientAllowance:e.Record({allowance:p}),BadBurn:e.Record({min_burn_amount:p}),Duplicate:e.Record({duplicate_of:i}),BadFee:e.Record({expected_fee:p}),CreatedInFuture:e.Record({ledger_time:s}),TooOld:e.Null,InsufficientFunds:e.Record({balance:p})}),Ne=e.Variant({Ok:i,Err:fe}),Oe=e.Record({from:e.Opt(e.Principal)}),xe=e.Vec(e.Record({end:e.Nat,canister_id:e.Principal,start:e.Nat}));t.fill(e.Variant({Int:e.Int,Map:e.Vec(e.Tuple(e.Text,t)),Nat:e.Nat,Blob:e.Vec(e.Nat8),Text:e.Text,Array:e.Vec(t)})),a.fill(e.Record({log_length:e.Nat,blocks:e.Vec(e.Record({id:e.Nat,block:t})),archived_blocks:e.Vec(e.Record({args:e.Vec(d),callback:e.Func([e.Vec(d)],[a],["query"])}))}));let Te=e.Record({certificate:e.Vec(e.Nat8),hash_tree:e.Vec(e.Nat8)});return e.Service({archives:e.Func([],[e.Vec(u)],["query"]),get_blocks:e.Func([d],[h],["query"]),get_data_certificate:e.Func([],[v],["query"]),get_transactions:e.Func([y],[D],["query"]),icrc10_supported_standards:e.Func([],[e.Vec(e.Record({url:e.Text,name:e.Text}))],["query"]),icrc1_balance_of:e.Func([c],[p],["query"]),icrc1_decimals:e.Func([],[e.Nat8],["query"]),icrc1_fee:e.Func([],[p],["query"]),icrc1_metadata:e.Func([],[e.Vec(e.Tuple(e.Text,o))],["query"]),icrc1_minting_account:e.Func([],[e.Opt(c)],["query"]),icrc1_name:e.Func([],[e.Text],["query"]),icrc1_supported_standards:e.Func([],[e.Vec(ee)],["query"]),icrc1_symbol:e.Func([],[e.Text],["query"]),icrc1_total_supply:e.Func([],[p],["query"]),icrc1_transfer:e.Func([te],[ce],[]),icrc21_canister_call_consent_message:e.Func([ne],[pe],[]),icrc2_allowance:e.Func([le],[_e],["query"]),icrc2_approve:e.Func([de],[ue],[]),icrc2_transfer_from:e.Func([ge],[Ne],[]),icrc3_get_archives:e.Func([Oe],[xe],["query"]),icrc3_get_blocks:e.Func([e.Vec(d)],[a],["query"]),icrc3_get_tip_certificate:e.Func([],[e.Opt(Te)],["query"]),icrc3_supported_block_types:e.Func([],[e.Vec(e.Record({url:e.Text,block_type:e.Text}))],["query"])})};var X=class e extends B.Canister{constructor(){super(...arguments);this.metadata=t=>this.caller(t).icrc1_metadata();this.transactionFee=t=>this.caller(t).icrc1_fee();this.balance=t=>this.caller({certified:t.certified}).icrc1_balance_of({owner:t.owner,subaccount:(0,B.toNullable)(t.subaccount)});this.transfer=async t=>{let r=await this.caller({certified:!0}).icrc1_transfer(ye(t));if("Err"in r)throw new w({errorType:r.Err,msg:"Failed to transfer"});return r.Ok};this.totalTokensSupply=t=>this.caller(t).icrc1_total_supply();this.transferFrom=async t=>{let r=await this.caller({certified:!0}).icrc2_transfer_from(Ve(t));if("Err"in r)throw new w({errorType:r.Err,msg:"Failed to transfer from"});return r.Ok};this.approve=async t=>{let r=await this.caller({certified:!0}).icrc2_approve(be(t));if("Err"in r)throw new w({errorType:r.Err,msg:"Failed to entitle the spender to transfer the amount"});return r.Ok};this.allowance=async t=>{let{certified:r,...n}=t;return this.caller({certified:r}).icrc2_allowance({...n})};this.consentMessage=async t=>{let{icrc21_canister_call_consent_message:r}=this.caller({certified:!0}),n=await r(Ae(t));if("Err"in n)throw he(n.Err);return n.Ok}}static create(t){let{service:r,certifiedService:n,canisterId:o}=(0,B.createServices)({options:t,idlFactory:Se,certifiedIdlFactory:Ge});return new e(o,r,n)}};var Ee=(o=>(o.SYMBOL="icrc1:symbol",o.NAME="icrc1:name",o.DECIMALS="icrc1:decimals",o.FEE="icrc1:fee",o.LOGO="icrc1:logo",o))(Ee||{});var Fe=require("@dfinity/principal"),g=require("@dfinity/utils"),Ze=64,Xe=({owner:e,subaccount:a})=>{if((0,g.isNullish)(a))return e.toText();let r=(n=>n.replace(/^0+/,""))((0,g.uint8ArrayToHexString)(Uint8Array.from(a)));return r.length===0?e.toText():`${e.toText()}-${qe({owner:e,subaccount:a})}.${r}`},qe=({owner:e,subaccount:a})=>{let t=(0,g.bigEndianCrc32)(Uint8Array.from([...e.toUint8Array(),...a]));return(0,g.encodeBase32)(t)},je=e=>{let[a,t]=e.split(".");if(!(0,g.notEmptyString)(a))throw new Error("Invalid account. No string provided.");if((0,g.isNullish)(t))return{owner:Fe.Principal.fromText(e)};let[r,...n]=a.split("-").reverse(),o=n.reverse().join("-"),l={owner:Fe.Principal.fromText(o),subaccount:(0,g.hexStringToUint8Array)(t.padStart(Ze,"0"))};if(qe(l)!==r)throw new Error("Invalid account. Invalid checksum.");return l};var j=require("@dfinity/utils"),Je=e=>{let a=/^([a-zA-Z]+):([A-Za-z0-9:\-.]+).*?(?:[?&](?:amount|value)=(\d+(?:\.\d+)?))?$/,t=e.match(a);if((0,j.isNullish)(t))return;let[r,n,o,l]=t;return{token:n,identifier:o,...(0,j.nonNullish)(l)&&!isNaN(parseFloat(l))&&{amount:parseFloat(l)}}};0&&(module.exports={ConsentMessageError,ConsentMessageUnavailableError,GenericError,IcrcIndexCanister,IcrcIndexNgCanister,IcrcLedgerCanister,IcrcMetadataResponseEntries,IcrcTransferError,IndexError,InsufficientPaymentError,UnsupportedCanisterCallError,decodeIcrcAccount,decodePayment,encodeIcrcAccount,mapIcrc21ConsentMessageError,toApproveArgs,toIcrc21ConsentMessageArgs,toTransferArg,toTransferFromArgs});
//# sourceMappingURL=index.cjs.js.map
